#include <iostream>
#include <solidfmm/stopwatch.hpp>

#ifdef __x86_64__

inline void torture()
{
    __asm__ volatile
    (
        "vzeroall                                  \n\t"
        

        // 128 Cycles per iteration,
        // 33554432 Iterations
        "movq $33554432, %%r8                      \n\t"

        ".TORTURELOOP:                             \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"
        "vfmadd213pd %%ymm8 , %%ymm8 , %%ymm9      \n\t"
        "vfmadd213pd %%ymm10 , %%ymm10 , %%ymm11   \n\t"
        "vfmadd213pd %%ymm12 , %%ymm12 , %%ymm13   \n\t"
        "vfmadd213pd %%ymm14 , %%ymm14 , %%ymm15   \n\t"
        "vfmadd213pd %%ymm0 , %%ymm0 , %%ymm1      \n\t"
        "vfmadd213pd %%ymm2 , %%ymm2 , %%ymm3      \n\t"
        "vfmadd213pd %%ymm4 , %%ymm4 , %%ymm5      \n\t"
        "vfmadd213pd %%ymm6 , %%ymm6 , %%ymm7      \n\t"

        "decq %%r8                                 \n\t"
        "jne  .TORTURELOOP                         \n\t"

        : // Input
        : // Output
        : // Clobbered registers
        "%ymm0" , "%ymm1" , "%ymm2" , "%ymm3" , 
        "%ymm4" , "%ymm5" , "%ymm6" , "%ymm7" ,
        "%ymm8" , "%ymm9" , "%ymm10", "%ymm11",
        "%ymm12", "%ymm13", "%ymm12", "%ymm15", "%r8"
    );
}
#endif

int main()
{
    size_t cycles = size_t(33554432) * size_t(128);
   
    #ifdef __x86_64__

    if ( __builtin_cpu_supports( "avx" ) == 0 )
    {
        std::cerr << "This program requires the AVX instruction set, which this CPU does not support.\n";
        return 2;
    }
 
    for ( size_t i = 0; i < 24; ++i )
    {
        solidfmm::stopwatch<double> clock;
        clock.reset();
        torture();
        double elapsed = clock.elapsed();
        double flop_rate = (1.0e-9 * cycles) / elapsed;
        std::cout << "GHz: " << flop_rate << ", GFLOP/s: " << 16.*flop_rate << ".\n";
    }

    #else
    std::cerr << "This program only works on amd64 CPUs.\n";
    return 1;
    #endif

    return 0;
}

